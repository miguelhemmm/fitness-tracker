function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,a){"use strict";a.r(e),a.d(e,"TrainingModule",(function(){return lt}));var n=a("hctd"),i=a("PCNd"),c=a("tyNb"),r=a("vQgB"),o=a("fXoL"),s=a("vEl1"),l=a("kt0X"),b=a("ofXK"),u=a("cCzN"),m=a("a318"),f=a("I/3d"),p=a("QnAy"),d=a("XiUz"),g=a("3Pt+"),h=a("MSSf"),y=a("IRfi"),v=a("2+6u"),C=a("G/Ji"),T=a("Xlwt"),U=a("j14s");function w(t,e){if(1&t&&(o.Ub(0,"mat-option",12),o.zc(1),o.Tb()),2&t){var a=e.$implicit;o.lc("value",a.id),o.Cb(1),o.Ac(a.name)}}function S(t,e){if(1&t&&(o.Ub(0,"mat-form-field",9),o.Ub(1,"mat-label"),o.zc(2,"Exercise"),o.Tb(),o.Ub(3,"mat-select",10),o.yc(4,w,2,2,"mat-option",11),o.Tb(),o.Tb()),2&t){var a=o.gc();o.Cb(4),o.lc("ngForOf",a.exercises)}}function k(t,e){1&t&&o.Pb(0,"mat-spinner",13)}function x(t,e){if(1&t){var a=o.Vb();o.Ub(0,"button",16),o.cc("click",(function(){return o.sc(a),o.gc(2).fetchAgain()})),o.zc(1,"Try Again"),o.Tb()}}function z(t,e){if(1&t&&(o.Ub(0,"button",17),o.zc(1,"Start"),o.Tb()),2&t){o.gc(2);var a=o.qc(2);o.lc("disabled",a.invalid)}}function I(t,e){if(1&t&&(o.Ub(0,"mat-card-actions",4),o.yc(1,x,2,0,"button",14),o.yc(2,z,2,1,"button",15),o.Tb()),2&t){var a=o.gc();o.Cb(1),o.lc("ngIf",!a.exercises),o.Cb(1),o.lc("ngIf",a.exercises)}}var O,D=((O=function(){function t(e,a,n,i){_classCallCheck(this,t),this.trainingService=e,this.database=a,this.uiService=n,this.store$=i}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.select(m.b).subscribe((function(e){return t.isLoading=e})),this.store$.select(r.b).subscribe((function(e){t.exercises=e})),this.fetchAgain()}},{key:"onStartTraining",value:function(t){this.trainingService.startExercise(t.value.pose)}},{key:"fetchAgain",value:function(){this.trainingService.fetchAvailableExercises()}}]),t}()).\u0275fac=function(t){return new(t||O)(o.Ob(s.a),o.Ob(f.a),o.Ob(p.a),o.Ob(l.a))},O.\u0275cmp=o.Ib({type:O,selectors:[["app-new-training"]],decls:14,vars:3,consts:[["fxLayout","row","fxLayoutAlign","center",1,"new-training","mt-5"],[3,"ngSubmit"],["f","ngForm"],["fxFlex","400px"],["fxLayoutAlign","center"],["mat-card-avatar","",1,"example-header-image"],["class","mt-2","appearance","outline",4,"ngIf"],["color","accent",4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["appearance","outline",1,"mt-2"],["ngModel","","name","pose","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","accent"],["type","button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","accent",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","accent",3,"disabled"]],template:function(t,e){if(1&t){var a=o.Vb();o.Ub(0,"section",0),o.Ub(1,"form",1,2),o.cc("ngSubmit",(function(){o.sc(a);var t=o.qc(2);return e.onStartTraining(t)})),o.Ub(3,"mat-card",3),o.Ub(4,"mat-card-header",4),o.Pb(5,"div",5),o.Ub(6,"mat-card-title"),o.zc(7,"Time to start your routine!"),o.Tb(),o.Ub(8,"mat-card-subtitle"),o.zc(9,"Select your position"),o.Tb(),o.Tb(),o.Ub(10,"mat-card-content",4),o.yc(11,S,5,1,"mat-form-field",6),o.yc(12,k,1,0,"mat-spinner",7),o.Tb(),o.yc(13,I,3,2,"mat-card-actions",8),o.Tb(),o.Tb(),o.Tb()}2&t&&(o.Cb(11),o.lc("ngIf",!e.isLoading&&e.exercises),o.Cb(1),o.lc("ngIf",e.isLoading),o.Cb(1),o.lc("ngIf",!e.isLoading))},directives:[d.c,d.b,g.s,g.m,g.n,h.a,d.a,h.e,h.c,h.h,h.g,h.d,b.l,y.b,y.e,v.a,g.l,g.o,g.q,b.k,U.o,C.c,h.b,T.a],styles:[".example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}"]}),O),R=a("tmTa"),P=a("R3tS"),A=a("sCmA"),_=a("A2Vd");function L(t,e){1&t&&(o.Ub(0,"mat-header-cell"),o.zc(1," Name"),o.Tb())}function E(t,e){if(1&t&&(o.Ub(0,"mat-cell"),o.zc(1),o.Tb()),2&t){var a=e.$implicit;o.Cb(1),o.Bc(" ",a.name," ")}}function $(t,e){1&t&&(o.Ub(0,"mat-header-cell",15),o.zc(1," Duration "),o.Tb())}function B(t,e){if(1&t&&(o.Ub(0,"mat-cell"),o.zc(1),o.hc(2,"number"),o.Tb()),2&t){var a=e.$implicit;o.Cb(1),o.Bc(" ",o.ic(2,1,a.duration)," ")}}function F(t,e){1&t&&(o.Ub(0,"mat-header-cell",15),o.zc(1," Calories "),o.Tb())}function j(t,e){if(1&t&&(o.Ub(0,"mat-cell"),o.zc(1),o.hc(2,"number"),o.Tb()),2&t){var a=e.$implicit;o.Cb(1),o.Bc(" ",o.ic(2,1,a.calories)," ")}}function N(t,e){1&t&&(o.Ub(0,"mat-header-cell",15),o.zc(1," Date "),o.Tb())}function M(t,e){if(1&t&&(o.Ub(0,"mat-cell"),o.zc(1),o.Tb()),2&t){var a=e.$implicit;o.Cb(1),o.Bc(" ",a.date," ")}}function X(t,e){1&t&&(o.Ub(0,"mat-header-cell",15),o.zc(1," State "),o.Tb())}function q(t,e){if(1&t&&(o.Ub(0,"mat-cell"),o.zc(1),o.Tb()),2&t){var a=e.$implicit;o.Cb(1),o.Bc(" ",a.state," ")}}function H(t,e){1&t&&o.Pb(0,"mat-header-row")}function V(t,e){1&t&&o.Pb(0,"mat-row")}var J,K,Q,Y=function(){return[5,10,25,50]},G=((J=function(){function t(e,a){_classCallCheck(this,t),this.trainingService=e,this.store$=a,this.displayedColumns=["name","duration","calories","date","state"],this.dataSource=new R.k}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.select(r.c).subscribe((function(e){t.dataSource.data=e})),this.trainingService.fetchCompletedOrCancelled()}},{key:"ngAfterViewInit",value:function(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}},{key:"onFilter",value:function(t){this.dataSource.filter=t.trim().toLowerCase()}}]),t}()).\u0275fac=function(t){return new(t||J)(o.Ob(s.a),o.Ob(l.a))},J.\u0275cmp=o.Ib({type:J,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var a;1&t&&(o.Dc(P.a,!0),o.Dc(A.a,!0)),2&t&&(o.pc(a=o.dc())&&(e.sort=a.first),o.pc(a=o.dc())&&(e.paginator=a.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["type","text","matInput","","placeholder","filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","duration"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","calories"],["matColumnDef","date"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"mat-form-field",1),o.Ub(2,"input",2),o.cc("keyup",(function(t){return e.onFilter(t.target.value)})),o.Tb(),o.Tb(),o.Tb(),o.Ub(3,"mat-table",3),o.Sb(4,4),o.yc(5,L,2,0,"mat-header-cell",5),o.yc(6,E,2,1,"mat-cell",6),o.Rb(),o.Sb(7,7),o.yc(8,$,2,0,"mat-header-cell",8),o.yc(9,B,3,3,"mat-cell",6),o.Rb(),o.Sb(10,9),o.yc(11,F,2,0,"mat-header-cell",8),o.yc(12,j,3,3,"mat-cell",6),o.Rb(),o.Sb(13,10),o.yc(14,N,2,0,"mat-header-cell",8),o.yc(15,M,2,1,"mat-cell",6),o.Rb(),o.Sb(16,11),o.yc(17,X,2,0,"mat-header-cell",8),o.yc(18,q,2,1,"mat-cell",6),o.Rb(),o.yc(19,H,1,0,"mat-header-row",12),o.yc(20,V,1,0,"mat-row",13),o.Tb(),o.Pb(21,"mat-paginator",14)),2&t&&(o.Cb(3),o.lc("dataSource",e.dataSource),o.Cb(16),o.lc("matHeaderRowDef",e.displayedColumns),o.Cb(1),o.lc("matRowDefColumns",e.displayedColumns),o.Cb(1),o.lc("pageSize",5)("pageSizeOptions",o.mc(5,Y)))},directives:[d.b,y.b,d.a,_.b,R.j,P.a,R.c,R.e,R.b,R.g,R.i,A.a,R.d,R.a,P.b,R.f,R.h],pipes:[b.e],styles:[""]}),J),W=a("LcAk"),Z=((K=function t(e){_classCallCheck(this,t),this.passedData=e}).\u0275fac=function(t){return new(t||K)(o.Ob(W.a))},K.\u0275cmp=o.Ib({type:K,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],["mat-raised-button","","color","warning",3,"mat-dialog-close"]],template:function(t,e){1&t&&(o.Ub(0,"h1",0),o.zc(1,"Do you want to stop?"),o.Tb(),o.Ub(2,"mat-dialog-content"),o.Ub(3,"p"),o.zc(4),o.Tb(),o.Tb(),o.Ub(5,"mat-dialog-actions"),o.Ub(6,"button",1),o.zc(7,"Yes"),o.Tb(),o.Ub(8,"button",2),o.zc(9,"No"),o.Tb(),o.Tb()),2&t&&(o.Cb(4),o.Bc("Your already got ",e.passedData.progress,"%, do you want to proceed?"),o.Cb(2),o.lc("mat-dialog-close",!0),o.Cb(2),o.lc("mat-dialog-close",!1))},directives:[W.g,W.e,W.c,T.a,W.d],encapsulation:2}),K),tt=a("IzEk"),et=((Q=function(){function t(e,a,n){_classCallCheck(this,t),this.dialog=e,this.trainingService=a,this.store$=n,this.trainingExit=new o.n,this.progress=0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.select(r.a).pipe(Object(tt.a)(1)).subscribe((function(e){t.selectedExercise=e})),this.startResumeTimer()}},{key:"startResumeTimer",value:function(){var t=this;this.timer=setInterval((function(){t.progress+=1,t.progress>=100&&(t.trainingService.completedExercise(),clearInterval(t.timer))}),this.selectedExercise.duration/100*1e3)}},{key:"stopExercise",value:function(){var t=this;clearInterval(this.timer),this.dialog.open(Z,{data:{progress:this.progress}}).afterClosed().subscribe((function(e){e?t.trainingService.cancelledExercise(t.progress):t.startResumeTimer()}))}},{key:"setButtonName",value:function(){return 100===this.progress?"Return":"Stop"}}]),t}()).\u0275fac=function(t){return new(t||Q)(o.Ob(W.b),o.Ob(s.a),o.Ob(l.a))},Q.\u0275cmp=o.Ib({type:Q,selectors:[["app-current-training"]],outputs:{trainingExit:"trainingExit"},decls:9,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"mt-5"],["color","primary","mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(o.Ub(0,"section",0),o.Pb(1,"mat-progress-spinner",1),o.Ub(2,"h1"),o.zc(3,"Progress"),o.Tb(),o.zc(4),o.Ub(5,"p"),o.zc(6,"Keep up with the good work!"),o.Tb(),o.Ub(7,"button",2),o.cc("click",(function(){return e.stopExercise()})),o.zc(8),o.Tb(),o.Tb()),2&t&&(o.Cb(1),o.lc("value",e.progress),o.Cb(3),o.Bc("\n",e.progress,"%\n"),o.Cb(4),o.Ac(e.setButtonName()))},directives:[d.c,d.b,C.a,T.a],styles:[""]}),Q);function at(t,e){1&t&&(o.Ub(0,"mat-tab-group"),o.Ub(1,"mat-tab",1),o.Pb(2,"app-new-training"),o.Tb(),o.Ub(3,"mat-tab",2),o.Pb(4,"app-past-trainings"),o.Tb(),o.Tb())}function nt(t,e){1&t&&o.Pb(0,"app-current-training")}var it,ct,rt,ot=[{path:"",component:(it=function(){function t(e,a){_classCallCheck(this,t),this.trainingService=e,this.store$=a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.store$.select(r.d).subscribe((function(e){t.ongoingTraining=!!e}))}}]),t}(),it.\u0275fac=function(t){return new(t||it)(o.Ob(s.a),o.Ob(l.a))},it.\u0275cmp=o.Ib({type:it,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Routine"],["label","Past Routines"]],template:function(t,e){1&t&&(o.yc(0,at,5,0,"mat-tab-group",0),o.yc(1,nt,1,0,"app-current-training",0)),2&t&&(o.lc("ngIf",!e.ongoingTraining),o.Cb(1),o.lc("ngIf",e.ongoingTraining))},directives:[b.l,u.b,u.a,D,G,et],styles:[""]}),it)}],st=((rt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Mb({type:rt}),rt.\u0275inj=o.Lb({factory:function(t){return new(t||rt)},imports:[[c.c.forChild(ot)],c.c]}),rt),lt=((ct=function t(){_classCallCheck(this,t)}).\u0275mod=o.Mb({type:ct}),ct.\u0275inj=o.Lb({factory:function(t){return new(t||ct)},imports:[[n.a,i.a,st,l.b.forFeature("training",r.e)]]}),ct)}}]);