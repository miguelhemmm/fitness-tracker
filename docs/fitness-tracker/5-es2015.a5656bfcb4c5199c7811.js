(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{CKRj:function(t,e,a){"use strict";a.r(e),a.d(e,"TrainingModule",(function(){return at}));var n=a("hctd"),c=a("PCNd"),i=a("tyNb"),r=a("vQgB"),s=a("fXoL"),o=a("vEl1"),l=a("kt0X"),b=a("ofXK"),u=a("cCzN"),m=a("a318"),d=a("I/3d"),p=a("QnAy"),g=a("XiUz"),f=a("3Pt+"),h=a("MSSf"),y=a("IRfi"),T=a("2+6u"),C=a("G/Ji"),v=a("Xlwt"),U=a("j14s");function S(t,e){if(1&t&&(s.Ub(0,"mat-option",12),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.lc("value",t.id),s.Cb(1),s.Ac(t.name)}}function w(t,e){if(1&t&&(s.Ub(0,"mat-form-field",9),s.Ub(1,"mat-label"),s.zc(2,"Exercise"),s.Tb(),s.Ub(3,"mat-select",10),s.yc(4,S,2,2,"mat-option",11),s.Tb(),s.Tb()),2&t){const t=s.gc();s.Cb(4),s.lc("ngForOf",t.exercises)}}function x(t,e){1&t&&s.Pb(0,"mat-spinner",13)}function z(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",16),s.cc("click",(function(){return s.sc(t),s.gc(2).fetchAgain()})),s.zc(1,"Try Again"),s.Tb()}}function I(t,e){if(1&t&&(s.Ub(0,"button",17),s.zc(1,"Start"),s.Tb()),2&t){s.gc(2);const t=s.qc(2);s.lc("disabled",t.invalid)}}function O(t,e){if(1&t&&(s.Ub(0,"mat-card-actions",4),s.yc(1,z,2,0,"button",14),s.yc(2,I,2,1,"button",15),s.Tb()),2&t){const t=s.gc();s.Cb(1),s.lc("ngIf",!t.exercises),s.Cb(1),s.lc("ngIf",t.exercises)}}let D=(()=>{class t{constructor(t,e,a,n){this.trainingService=t,this.database=e,this.uiService=a,this.store$=n}ngOnInit(){this.store$.select(m.b).subscribe(t=>this.isLoading=t),this.store$.select(r.b).subscribe(t=>{this.exercises=t}),this.fetchAgain()}onStartTraining(t){this.trainingService.startExercise(t.value.pose)}fetchAgain(){this.trainingService.fetchAvailableExercises()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.a),s.Ob(d.a),s.Ob(p.a),s.Ob(l.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-new-training"]],decls:14,vars:3,consts:[["fxLayout","row","fxLayoutAlign","center",1,"new-training","mt-5"],[3,"ngSubmit"],["f","ngForm"],["fxFlex","400px"],["fxLayoutAlign","center"],["mat-card-avatar","",1,"example-header-image"],["class","mt-2","appearance","outline",4,"ngIf"],["color","accent",4,"ngIf"],["fxLayoutAlign","center",4,"ngIf"],["appearance","outline",1,"mt-2"],["ngModel","","name","pose","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","accent"],["type","button","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["type","submit","mat-raised-button","","color","accent",3,"disabled",4,"ngIf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","accent",3,"disabled"]],template:function(t,e){if(1&t){const t=s.Vb();s.Ub(0,"section",0),s.Ub(1,"form",1,2),s.cc("ngSubmit",(function(){s.sc(t);const a=s.qc(2);return e.onStartTraining(a)})),s.Ub(3,"mat-card",3),s.Ub(4,"mat-card-header",4),s.Pb(5,"div",5),s.Ub(6,"mat-card-title"),s.zc(7,"Time to start your routine!"),s.Tb(),s.Ub(8,"mat-card-subtitle"),s.zc(9,"Select your position"),s.Tb(),s.Tb(),s.Ub(10,"mat-card-content",4),s.yc(11,w,5,1,"mat-form-field",6),s.yc(12,x,1,0,"mat-spinner",7),s.Tb(),s.yc(13,O,3,2,"mat-card-actions",8),s.Tb(),s.Tb(),s.Tb()}2&t&&(s.Cb(11),s.lc("ngIf",!e.isLoading&&e.exercises),s.Cb(1),s.lc("ngIf",e.isLoading),s.Cb(1),s.lc("ngIf",!e.isLoading))},directives:[g.c,g.b,f.s,f.m,f.n,h.a,g.a,h.e,h.c,h.h,h.g,h.d,b.l,y.b,y.e,T.a,f.l,f.o,f.q,b.k,U.o,C.c,h.b,v.a],styles:[".example-header-image[_ngcontent-%COMP%]{background-image:url(https://material.angular.io/assets/img/examples/shiba1.jpg);background-size:cover}"]}),t})();var R=a("tmTa"),k=a("R3tS"),A=a("sCmA"),L=a("A2Vd");function $(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.zc(1," Name"),s.Tb())}function E(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",t.name," ")}}function P(t,e){1&t&&(s.Ub(0,"mat-header-cell",15),s.zc(1," Duration "),s.Tb())}function B(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.zc(1),s.hc(2,"number"),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",s.ic(2,1,t.duration)," ")}}function F(t,e){1&t&&(s.Ub(0,"mat-header-cell",15),s.zc(1," Calories "),s.Tb())}function N(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.zc(1),s.hc(2,"number"),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",s.ic(2,1,t.calories)," ")}}function j(t,e){1&t&&(s.Ub(0,"mat-header-cell",15),s.zc(1," Date "),s.Tb())}function M(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",t.date," ")}}function X(t,e){1&t&&(s.Ub(0,"mat-header-cell",15),s.zc(1," State "),s.Tb())}function q(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.zc(1),s.Tb()),2&t){const t=e.$implicit;s.Cb(1),s.Bc(" ",t.state," ")}}function H(t,e){1&t&&s.Pb(0,"mat-header-row")}function V(t,e){1&t&&s.Pb(0,"mat-row")}const J=function(){return[5,10,25,50]};let K=(()=>{class t{constructor(t,e){this.trainingService=t,this.store$=e,this.displayedColumns=["name","duration","calories","date","state"],this.dataSource=new R.k}ngOnInit(){this.store$.select(r.c).subscribe(t=>{this.dataSource.data=t}),this.trainingService.fetchCompletedOrCancelled()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}onFilter(t){this.dataSource.filter=t.trim().toLowerCase()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.a),s.Ob(l.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-past-trainings"]],viewQuery:function(t,e){var a;1&t&&(s.Dc(k.a,!0),s.Dc(A.a,!0)),2&t&&(s.pc(a=s.dc())&&(e.sort=a.first),s.pc(a=s.dc())&&(e.paginator=a.first))},decls:22,vars:6,consts:[["fxLayoutAlign","center center"],["fxFlex","40%"],["type","text","matInput","","placeholder","filter",3,"keyup"],["matSort","",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","duration"],["mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","calories"],["matColumnDef","date"],["matColumnDef","state"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],["mat-sort-header",""]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"mat-form-field",1),s.Ub(2,"input",2),s.cc("keyup",(function(t){return e.onFilter(t.target.value)})),s.Tb(),s.Tb(),s.Tb(),s.Ub(3,"mat-table",3),s.Sb(4,4),s.yc(5,$,2,0,"mat-header-cell",5),s.yc(6,E,2,1,"mat-cell",6),s.Rb(),s.Sb(7,7),s.yc(8,P,2,0,"mat-header-cell",8),s.yc(9,B,3,3,"mat-cell",6),s.Rb(),s.Sb(10,9),s.yc(11,F,2,0,"mat-header-cell",8),s.yc(12,N,3,3,"mat-cell",6),s.Rb(),s.Sb(13,10),s.yc(14,j,2,0,"mat-header-cell",8),s.yc(15,M,2,1,"mat-cell",6),s.Rb(),s.Sb(16,11),s.yc(17,X,2,0,"mat-header-cell",8),s.yc(18,q,2,1,"mat-cell",6),s.Rb(),s.yc(19,H,1,0,"mat-header-row",12),s.yc(20,V,1,0,"mat-row",13),s.Tb(),s.Pb(21,"mat-paginator",14)),2&t&&(s.Cb(3),s.lc("dataSource",e.dataSource),s.Cb(16),s.lc("matHeaderRowDef",e.displayedColumns),s.Cb(1),s.lc("matRowDefColumns",e.displayedColumns),s.Cb(1),s.lc("pageSize",5)("pageSizeOptions",s.mc(5,J)))},directives:[g.b,y.b,g.a,L.b,R.j,k.a,R.c,R.e,R.b,R.g,R.i,A.a,R.d,R.a,k.b,R.f,R.h],pipes:[b.e],styles:[""]}),t})();var Q=a("LcAk");let Y=(()=>{class t{constructor(t){this.passedData=t}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(Q.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-stop-training"]],decls:10,vars:3,consts:[["mat-dialog-title",""],["mat-raised-button","","color","primary",3,"mat-dialog-close"],["mat-raised-button","","color","warning",3,"mat-dialog-close"]],template:function(t,e){1&t&&(s.Ub(0,"h1",0),s.zc(1,"Do you want to stop?"),s.Tb(),s.Ub(2,"mat-dialog-content"),s.Ub(3,"p"),s.zc(4),s.Tb(),s.Tb(),s.Ub(5,"mat-dialog-actions"),s.Ub(6,"button",1),s.zc(7,"Yes"),s.Tb(),s.Ub(8,"button",2),s.zc(9,"No"),s.Tb(),s.Tb()),2&t&&(s.Cb(4),s.Bc("Your already got ",e.passedData.progress,"%, do you want to proceed?"),s.Cb(2),s.lc("mat-dialog-close",!0),s.Cb(2),s.lc("mat-dialog-close",!1))},directives:[Q.g,Q.e,Q.c,v.a,Q.d],encapsulation:2}),t})();var G=a("IzEk");let _=(()=>{class t{constructor(t,e,a){this.dialog=t,this.trainingService=e,this.store$=a,this.trainingExit=new s.n,this.progress=0}ngOnInit(){this.store$.select(r.a).pipe(Object(G.a)(1)).subscribe(t=>{this.selectedExercise=t}),this.startResumeTimer()}startResumeTimer(){this.timer=setInterval(()=>{this.progress+=1,this.progress>=100&&(this.trainingService.completedExercise(),clearInterval(this.timer))},this.selectedExercise.duration/100*1e3)}stopExercise(){clearInterval(this.timer),this.dialog.open(Y,{data:{progress:this.progress}}).afterClosed().subscribe(t=>{t?this.trainingService.cancelledExercise(this.progress):this.startResumeTimer()})}setButtonName(){return 100===this.progress?"Return":"Stop"}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(Q.b),s.Ob(o.a),s.Ob(l.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-current-training"]],outputs:{trainingExit:"trainingExit"},decls:9,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"mt-5"],["color","primary","mode","determinate",3,"value"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"section",0),s.Pb(1,"mat-progress-spinner",1),s.Ub(2,"h1"),s.zc(3,"Progress"),s.Tb(),s.zc(4),s.Ub(5,"p"),s.zc(6,"Keep up with the good work!"),s.Tb(),s.Ub(7,"button",2),s.cc("click",(function(){return e.stopExercise()})),s.zc(8),s.Tb(),s.Tb()),2&t&&(s.Cb(1),s.lc("value",e.progress),s.Cb(3),s.Bc("\n",e.progress,"%\n"),s.Cb(4),s.Ac(e.setButtonName()))},directives:[g.c,g.b,C.a,v.a],styles:[""]}),t})();function W(t,e){1&t&&(s.Ub(0,"mat-tab-group"),s.Ub(1,"mat-tab",1),s.Pb(2,"app-new-training"),s.Tb(),s.Ub(3,"mat-tab",2),s.Pb(4,"app-past-trainings"),s.Tb(),s.Tb())}function Z(t,e){1&t&&s.Pb(0,"app-current-training")}const tt=[{path:"",component:(()=>{class t{constructor(t,e){this.trainingService=t,this.store$=e}ngOnInit(){this.store$.select(r.d).subscribe(t=>{this.ongoingTraining=!!t})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(o.a),s.Ob(l.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-training"]],decls:2,vars:2,consts:[[4,"ngIf"],["label","New Routine"],["label","Past Routines"]],template:function(t,e){1&t&&(s.yc(0,W,5,0,"mat-tab-group",0),s.yc(1,Z,1,0,"app-current-training",0)),2&t&&(s.lc("ngIf",!e.ongoingTraining),s.Cb(1),s.lc("ngIf",e.ongoingTraining))},directives:[b.l,u.b,u.a,D,K,_],styles:[""]}),t})()}];let et=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[i.c.forChild(tt)],i.c]}),t})(),at=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.a,c.a,et,l.b.forFeature("training",r.e)]]}),t})()}}]);